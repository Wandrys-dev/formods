<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Merges default app options with the changes made in the UI"><title>Fetch Data Wrangling State — DW_fetch_state • formods</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fetch Data Wrangling State — DW_fetch_state"><meta property="og:description" content="Merges default app options with the changes made in the UI"><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">formods</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/included_modules.html">Included Modules</a>
    <a class="dropdown-item" href="../articles/making_modules.html">Making Modules</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/john-harrold/formods/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Fetch Data Wrangling State</h1>
      <small class="dont-index">Source: <a href="https://github.com/john-harrold/formods/blob/HEAD/R/DW_Server.R" class="external-link"><code>R/DW_Server.R</code></a></small>
      <div class="d-none name"><code>DW_fetch_state.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Merges default app options with the changes made in the UI</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">DW_fetch_state</span><span class="op">(</span></span>
<span>  <span class="va">id</span>,</span>
<span>  <span class="va">input</span>,</span>
<span>  <span class="va">session</span>,</span>
<span>  <span class="va">FM_yaml_file</span>,</span>
<span>  <span class="va">MOD_yaml_file</span>,</span>
<span>  <span class="va">id_UD</span>,</span>
<span>  <span class="va">react_state</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>id</dt>
<dd><p>Shiny module ID</p></dd>


<dt>input</dt>
<dd><p>Shiny input variable</p></dd>


<dt>session</dt>
<dd><p>Shiny session variable</p></dd>


<dt>FM_yaml_file</dt>
<dd><p>App configuration file with FM as main section.</p></dd>


<dt>MOD_yaml_file</dt>
<dd><p>Module configuration file with MC as main section.</p></dd>


<dt>id_UD</dt>
<dd><p>ID string for the upload data module used to handle uploads or
the name of the list element in react_state where the data set is stored.</p></dd>


<dt>react_state</dt>
<dd><p>Variable passed to server to allow reaction outside of
module (<code>NULL</code>)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>List containing the current state of the DM module including default
values from the yaml file as well as any changes made by the user. The
structure of the list is defined below.</p><ul><li><p>yaml: Contents of the yaml file.</p></li>
<li><p>MC: Module components of the yaml file.</p></li>
<li><p>DW: Data wrangling state</p><ul><li><p>isgood: Boolean status of the state. FALSE if the dataset
   identified by id_UD is bad.</p></li>
<li><p>checksum:         MD5 sum indicating if there was a change in the
   datasets within the view. Use this to trigger updates in respose to
   changes in this module.</p></li>
<li><p>button_counters:  List of counters to detect button clicks.</p></li>
<li><p>code_previous:    Loading code from the UD field.</p></li>
<li><p>current_view:     View id of the current active data wrangling view.</p></li>
<li><p>UD:               Copy of the <code>"UD"</code> field of the  <code>id_UD</code> from the <code>react_state</code> input.</p></li>
<li><p>ui:               Current value of form elements in the UI</p></li>
<li><p>ui_hold:          List of hold elements to disable updates before a full ui referesh is complete.</p></li>
<li><p>view_cntr:        Counter for tracking view ids, value contains the id of the last view created.</p></li>
<li><p>views:            List of data wrangling views. Each view has the following structure:</p><ul><li><p>isgood: Boolean status of the data view. False if evaluation fails</p></li>
<li><p>id: Character id (<code>view_idx</code>)</p></li>
<li><p>idx: Numeric id (<code>1</code>)</p></li>
<li><p>view_ds_object_name: Object name for this data view</p></li>
<li><p>code_previous: Code to load data and assign to view object.</p></li>
<li><p>key: User key (short description)</p></li>
<li><p>WDS: Current value of the data view with all of the successful commands in elements_table evaluated.</p></li>
<li><p>elements_table: Table of data wrangling elements.</p></li>
<li><p>checksum: MD5 sum of WDS</p></li>
<li><p>code: Code to generate WDS from start to finish</p></li>
<li><p>code_dw_only: Code for jsut the wrangling portion.</p></li>
</ul></li>
</ul></li>
<li><p>MOD_TYPE: Character data containing the type of module <code>"DW"</code></p></li>
<li><p>id: Character data containing the module id</p></li>
<li><p>FM_yaml_file: App configuration file with FM as main section.</p></li>
<li><p>MOD_yaml_file:  Module configuration file with MC as main section.
 module in the session variable.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Within shiny both session and input variables will exist, </span></span></span>
<span class="r-in"><span><span class="co"># this creates examples here for testing purposes:</span></span></span>
<span class="r-in"><span><span class="va">sess_res</span> <span class="op">=</span> <span class="fu"><a href="DW_test_mksession.html">DW_test_mksession</a></span><span class="op">(</span>session<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → UD: State initialized</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → UD: module checksum updated:631af84e28478adc1628dd2c9fb22662</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → DW: State initialized</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → DW: module checksum updated:f5866ed2a560dbc564dec9145314b519</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → DW: module checksum updated:4911af9c225aac6361acea8f26bbfac9</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → DW: module checksum updated:c9b0caeab52fb59e0dcbb88ee042729a</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → DW: module checksum updated:d53e4eeadacffd272f5e584700d4e5c6</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → DW: module checksum updated:25e606a4b68a27b1b111d4ce7d6ed944</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → DW: module checksum updated:cf7553b85f514e80b0495bac005e30a3</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → DW: module checksum updated:9237881640f3d22346fbce5f152d9e69</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → DW: module checksum updated:928a817e1c9205fbbe273de91af26c6a</span>
<span class="r-in"><span><span class="va">session</span> <span class="op">=</span> <span class="va">sess_res</span><span class="op">$</span><span class="va">session</span></span></span>
<span class="r-in"><span><span class="va">input</span>   <span class="op">=</span> <span class="va">sess_res</span><span class="op">$</span><span class="va">input</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Configuration files</span></span></span>
<span class="r-in"><span><span class="va">FM_yaml_file</span>  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"formods"</span>, <span class="st">"templates"</span>, <span class="st">"formods.yaml"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">MOD_yaml_file</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"formods"</span>, <span class="st">"templates"</span>, <span class="st">"DW.yaml"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We need to specify both the DW module id as well as the</span></span></span>
<span class="r-in"><span><span class="co"># id of the UD module that feeds into it.</span></span></span>
<span class="r-in"><span><span class="va">id</span>    <span class="op">=</span> <span class="st">"DW"</span></span></span>
<span class="r-in"><span><span class="va">id_UD</span> <span class="op">=</span> <span class="st">"UD"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Creating an empty state object</span></span></span>
<span class="r-in"><span><span class="va">state</span> <span class="op">=</span> <span class="fu">DW_fetch_state</span><span class="op">(</span>id              <span class="op">=</span> <span class="va">id</span>,           </span></span>
<span class="r-in"><span>                       input           <span class="op">=</span> <span class="va">input</span>, </span></span>
<span class="r-in"><span>                       session         <span class="op">=</span> <span class="va">session</span>,</span></span>
<span class="r-in"><span>                       FM_yaml_file    <span class="op">=</span> <span class="va">FM_yaml_file</span>, </span></span>
<span class="r-in"><span>                       MOD_yaml_file   <span class="op">=</span> <span class="va">MOD_yaml_file</span>,</span></span>
<span class="r-in"><span>                       id_UD           <span class="op">=</span> <span class="st">"UD"</span>,</span></span>
<span class="r-in"><span>                       react_state     <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by John Harrold.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

